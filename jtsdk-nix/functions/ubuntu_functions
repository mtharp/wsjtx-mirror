#
# Part of the JTSDK-NIX Project
# Function Library for Ubuntu setup

#------------------------------Ubuntu Functions--------------------------------#

# make base setup_dir is it doesnt not exist
function ubuntu_setup_marker() {
	mkdir -p $_MKRD
}

# check which version we are using
function ubuntu_distro_info() {

touch $_MKRD/ubuntu.info.mkr
_DISTRIBUTOR=$(lsb_release -i |awk 'FNR==1 {print $3}')
_RELEASE=$(lsb_release -r |awk '{print $2}')
_ARCH=$(uname -m)

# ubuntu uses lsb_release 
cat > $_MKRD/ubuntu.info.mkr <<EOL
$_ARCH
$_DISTRIBUTOR
$_RELEASE
EOL

}

# package installation
function ubuntu_pkg_list() {

# pre-install pkg list
dpkg --get-selections > $_MKRD/$USER-orig-pkg-list

# start installation
echo "Currently in Simulation Mode with [ -s ] "
echo "No actual installation will take place"
echo
sudo apt-get -s install $(< $_CFG/pkg_list_ubuntu_$(uname -m))
touch $_MKRD/$(uname -m)_pkg_install.mkr

# post-install pkg list
dpkg --get-selections > $_MKRD/$USER-post-pkg-list

}

# package installation
function post_install_pkg_chk() {

echo "Just to keep set -e happy"

}





