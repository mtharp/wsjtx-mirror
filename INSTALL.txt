-------------------------------------------------
Build and Installation Instructions for WSPR 4.0
-------------------------------------------------

The following outlines basic installation instructions for Linux and Mac.


REQUIRED DEPENDENCIES
---------------------
To compile WSPR, you will need the following packages / applications:

	* A C/C++ and gfortran compiler
	* GNU Autotools: autoconf, make
	* Portaudio-19-dev
	* FFTW 3.3+-dev (only libraries (.so are required)
	* Samplerate Development Library.
	* Python3.2+
	* Numeric Python (Numpy 1.8.1+), providing F2PY v2.0
	* PIL, (Python Imaging Library)
	* Python-tk (Tcl\TK 8.6.1 or Later)
	* Optional: Hamlib 1.2.15.x (or current distro verson) for rig control

Example: For Ubuntu 14.04, the following packages are required:

sudo apt-get install autoconf autotools build-essential gfortran libtool \
libfftw3-dev libgfortran3:i386 libusb-dev libhamlib-dev libhamlib-utils \
libsamplerate0-dev portaudio19-dev python3-setuptools python3-dev python3-imaging \
python3-imaging-tk python3-pip python3-tk python3-numpy texinfo

You may be able to slim the list down my selctive installation, but the above
provides a solid base to start with.


INSTALL
-------
To build and install, issue the following:

./autogen.sh

make && make install


RUN WPSR
--------
To run WSPR after build, cd to ../wspr and:

python3 -O wspr.py

Note: If your default python is python3, and called by issuing python,
then change to:

python -O wspr.py


INSTALL PREFIX
--------------
The default install location is $HOME/wspr. You can change the
install locaiton using the following configuration parameter:

Example:

./configure --prefix=$HOME/test/wspr

Note: Due to confliucting file names with "fmt", it's *not* advisable
to install WSPR to /usr/local as Coreutils also has an application
called "fmt.


NON-STANDARD LIBRARY LOCATIONS
------------------------------
The configure script will search standard Linux header and library locaitons
for FFTW3, Samplerate and Portaudio19. If it cannot locate and test the 
required packages, you will be prompted to supply the locations:

Example - (header location):
./configure CPPFLAGS="-I$HOME/test/portaudio/include"

Note the " .. " for parameter expansion for $HOME


Example - (library location):
./configure LDFLAGS='-L/home/user-name/test/portaudio/lib'

Note ' .. ' no parameter expansion needed

NOTE: When using CPPFLAGS or LDFLAGS, use absolute paths, for example:

-I/home/$USER/test/portaudio/include *not* ==> ~/test/portaudio/include

or

-L$HOME/test/portaudio/lib *not* ==> ~/test/portaudio/lib


MULTI-PYTHON SYSTEMS
--------------------
On dual Python systems, you *may* need to specify Python3 and F2PY3 locations.
The configure scripts tests for both Python3 and F2PY, but if your system has
unique install locations, the following may be helpful:

Example:
./configure --with-python3='/usr/bin/python3' --with-f2py='/usr/local/bin/f2py3'

Note: if you build a custom Python3x, make sure you include PIL, TK and Numpy
(F2PY).


CONFIGURE && MAKE
-----------------
To configure or reconfigure, then build WSPR, type the following:


./autogen.sh


Note: You can re-run ./configure any time after a sucessfull ./autogen.sh run.
To see available configure options, type:

./configure --help


MAKE INSTALL
------------
This target install WSPR to the ${PREFIX} location specified by the user.
If --prefix= was not changed, the default installation directory is
$HOME/wspr:

make install


CLEAN THE BUILD TREE
--------------------
This target removes files generated during make.

make clean


CLEAN FOR DISTRIBUTION
----------------------
This target removes most all of the build files, (configure script, Makfile)
and so on. This will also remove files generated from wspr0 and fmt.

make distclean


UNINSTALL
---------
The make script has a provision to uninstall WSPR. It serves the same function
as simply deleting the ../wspr folder. The delete location is specified in
the Makefile, based on the users input. To tun uninstall:

make uninstall


BASIC MAC OSX INSTALLATION INSTUCTIONS (Example 10.7)
-----------------------------------------------------

You need to be familiar with command line operations using
the Terminal window and with downloading and installing
libraries.

Apple provide python 2.x as part of the system but this must
be upgraded to python 3.4.  Use pip3.4 to install numpy, 
Pillow and Pmw.   Follow installation guides from 
www.python.org.  Python3.4 will be installed in
/Library/Frameworks/Python.framework/

It is important that references to python should then be
to python3.4 and not the earlier version of python.  Watch
out for Apple's use of soft links to the earlier versions
found in /System/Library/Frameworks/Python.framework. These
should be disabled.

You will also need portaudio v19 as well as fftw libraries
from www.portaudio.org and www.fftw.org respectively.  

Then, in the wspr directory:

Example - (library location):
./configure LDFLAGS='-L/home/user-name/test/portaudio/lib'

Note ' .. ' no parameter expansion needed

NOTE: When using CPPFLAGS or LDFLAGS, use absolute paths, for example:

-I/home/$USER/test/portaudio/include *not* ==> ~/test/portaudio/include

or

-L$HOME/test/portaudio/lib *not* ==> ~/test/portaudio/lib


Check the new Makefile carefully to see that the correct
references to python3.4 and the new f2py are made. Then

   make

You might have to move Audio.so to WsjtMod manually.

Thereafter     python wspr.py   should execute.

Additional guidance from  g4kla at rmnjmn.demon.co.uk




