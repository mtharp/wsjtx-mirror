:prog: The WSJT Developers Guide

=== Windows CMake

The preferred method of compiling _WSJT-X_ on Windows is using *JTSDK-QT*.
If you have not *Installed and Updated* *JTSDK-QT*, you should do so before
continuing, see <<WININSTALL,Windows Install>> and <<WINUPDATE,Update>>

Additionally, QtCreator {plus} Qmake {plus} Makefile.MinGW can be 
used to build _WSJT-X_. Details for setting up QtCreator to build using
this method are included in the <<JTSDKQT,JTSDK-QT Section>>.

TIP: You can create a desktop shortcut to +*jtsdk-qtenv.bat*+ if
desired. This can also be done for the final +*wsjtx.exe*+ for *Relese*
and +*wsjtx.bat*+ for *Debug*.

[[WSJTCOMPILEOPTIONS]]
.COMPILING OPTIONS
Using *JTSDK-QT* for compiling _WSJT-X_, you can build two versions:

* <<WSJTXCOMPILE,Debug>>
* <<WSJTXCOMPILE,Release>>

Due to the quick turn-around (seconds rather than minutes), *Debug*
is the default *JTSDK-QT* build. *Debug* is better suited to developers
who are adding or modifying code and need a quick build check to test
their edits.

.Debug Features
* Fast build times
* Best options for developers and application testers
* Qt Debug warning messages tuned on by default
* Links QT Debug libraires, which is only availble in Debug builds
* Uses shared dependencies 
* Dependencies must be in %PATH% *(use wsjtx-bat)*
* Cannot build the Installer Package

.Release Features
* Slower build times (3 to 5 minutes on Windows is not unusual)
* Inscreased compiler optimization (-O3)
* Qt Debug warning messages turned off
* Relative paths are removed
* Builds full install tree, non-system dependencies embeded {plus} qt.conf
* Provides a stand-alone executable {plus} all required files

TIP: If you need work on a sub-section or sub-target, you wish to
use <<WINQMAKE,QtCreator {plus} Qmake>> or manually build the targets with
*CMake* command line options. If your unfamiliar either of these two
methods, build the full install target with +*JTSDK-QT*+ for simplicity.

[[WSJTXCOMPILE]]

.[red]#Special Hamlib3 Instructions#

**********************************************************************

IMPORTANT: The current development branch of _WSJT-X_ is using a custom
built set of Hamlib3 binaries on Windows. At some point, after official
release from the Hamlib developers, we will shift all apps using
Hamlib 1.12.x to Hamlib3. In the meantime, follow the special instruction
for installing Hamlib3 into your JTSDK-QT directory, then continue with
building. Hamlib3 will be included in the next JTSDK-QT release if needed.

* Hamlib3 {hamlib3}
* Save the .zip file to a temporary location, then unzip
* Create directoty C:\JTSDK-QT\hamlib3
* Copy directory (path)\hamlib\mingw32 to C:\JTSDK-QT\hamlib3\

You should end up with *2* Hamlib directories:

* C:\JTSDK-QT\hamlib
* C:\JTSDK-QT\hamlib3\mingw32

This will allow _WSJT-X_ to use Hamlib3 and others to use Hamlib 1.12.x
as needed.

**********************************************************************

.COMPILE WSJT-X

** Open Windows CMD terminal, at the prompt, type,:
----
C:\JTSDK-QT\jtsdk-qtenv.bat
----
** You should be presented with <<QTMENU,Figure-3>>
** At the Prompt, type,:
----

*For Debug*

build wsjtx

*For Release*

build wsjtx -r

Note the ( -r for Release )

----
** If you have not checked out _WSJT-X_ previously, you will be prompted
to do so:

.WSJTX Checkout Not Found
image::images/jtsdk-wsjtx-co.png[]

** Follow the prompts, Anonymous or Developer, then type,:
-----

*For Debug*

build wsjtx

*For Release*

build wsjtx -r

Note the ( -r for Release )

-----

TIP: If this is a subsequent build, you will be asked to update from SVN.
On a new checkout, select ( N for do not update), if not new, it is 
your choice. If the SVN update fails, for whatever reason, or there are errors
during the build, simply re-run the build, as sometimes Windows reacts
faster than SVN can respond, or there is an SVN comms error.

** At build completion, you are presented with an option to
run +*WSJT-X*+ now. Select ( Y to Run / N to Finish and Exit).
** To manually run the newly built +*wsjtx.exe or wsjtx.bat*+, browse to:
----

*For Release*
C:\JTSDK-QT\wsjtx\install\Release\bin

*For Debug*
C:\JTSDK-QT\wsjtx\install\Debug\bin

----
** Double click on +*wsjtx.exe*+ for *Release* or +*wsjtx.bat*+ for *Debug*

[[WINQMAKE]]
=== Windows Qmake

Under Construction

////
=== Linux CMake

Under Construction

=== Linux Qmake

Under Construction


This example uses Qmake and Makefile.Linux. In order to build _WSJT-X_ form
source, install the following packages:

[[DEPS]]
----------
# DEBIAN, UBUNTU, MINT and FRIENDS

# ADD QT5 PPA (Copy and Paste as "1" command in a X-Term):
# This can take a while to install.
sudo add-apt-repository ppa:ubuntu-sdk-team/ppa && sudo apt-get update && \
sudo apt-get dist-upgrade && sudo apt-get install ubuntu-sdk

# AFTER QT4/5 INSTALLATION (Copy and Paste as "1" command in a X-Term):
sudo apt-get install gcc g++ gfortran make libfftw3-dev \
libpulse-dev hamlib libhamlib-dev pulseaudio subversion \
libgfortran3:i386 libc6-i386 cmake

----------

==== WSJT-X Dependencies
[horizontal]
+*gcc*+:: GNU C Compiler
+*g{plus}{plus}*+:: GNU C{plus}{plus} Compiler
+*gfortran*+:: GNU Fortran or F90
+*make*+:: GNU Make
+*libqt5multimedia5-plugins*+:: QT5 Media Plugins
+*libfftw3-dev*+:: Fast Fourier Transforms
+*libpulse-dev*+:: Headers and Files for Pulse AUdio
+*libhamlib-dev*+:: Headers and Files for Hamlib
+*qtbase5-dev*+:: QT5 Base Dev Files
+*qtmultimedia5-dev*+:: Qt5 Multimedia Dev Files
+*pulseaudio*+:: Pulse Audio Sound Driver
+*subversion*+:: Version Control Software
+*libgfortran.so.3*+:: Fortran Library
+*libc.so.6*+:: GCC C Library
+*libm.so.6*+:: GCC C Library
+*libgcc_s.so.1libm.so.6*+:: GCC C Library 
+*libquadmath.so.0*+:: Quad-Precision Math Library

.Build Methods

TIP: You can perform the steps manually if desired. Using
the <<MAKEFILE,script>> is the preferred method. To perform the steps
manually, use a text editor, open the file, and follow the steps.

[[MAKEFILE]]
.Script Method
* Open a X-Term
* Checkout +*wsjtx-makefile.sh*+ from SVN:

----------
# CO BUILD SCRIPT
# use export to co a single file
# use --force to make svn update the file if it exists
svn export --force svn://svn.code.sf.net/p/wsjt/wsjt/branches/doc/dev-guide/source/wsjtx-makefile.sh

# CHANGE PERMISSION
chmod +x ./wsjtx-compile.sh

----------

.To Build Release version
---------
./wsjtx-makefile.sh -r
---------

.To Build Debug version
---------
./wsjtx-makefile.sh -d
---------

.WSJT-X Location
* +*/home/$USER/Projects/wsjt-env/wsjtx-$rev_num*+
* Proceed to <<CHKKVASD,check Kvasd>> then run _WSJT-X_

----------
# When running from a X-Term [ ./wsjtx ], the xterm remains open.
# This is good for testing and chasing errors. Run WSJT-X with:

./wsjtx

# You can also use a file manager. Browse to WSJT-X dir, and open
# as you would any other program. Using this method to launch, you
# should not see the X-Term window.

----------

=== Linux CMake

This example uses CMake to build WSJT-X. The same dependencies apply. If
you have not installed the <<DEPS,dependencies>>, do so before continuing.

TIP: You can perform the steps manually if desired. Using
the <<CMAKE,script>> is the preferred method. To perform the steps
manually, use a text editor, open the file, and follow the steps.

[[CMAKE]]
.Script Method
* Open a terminal
* Checkout +*wsjtx-cmake.sh*+ from SVN:

----------
# CO BUILD SCRIPT
# use export to co a single file
# use --force to make svn update the file if it exists
svn export --force svn://svn.code.sf.net/p/wsjt/wsjt/branches/doc/dev-guide/source/wsjtx-cmake.sh

# CHANGE PERMISSION
chmod +x ./wsjtx-cmake.sh

----------

.To Build Release version
---------
./wsjtx-cmake.sh -r
---------

.To Build Debug version
---------
./wsjtx-cmake.sh -d
---------

.WSJT-X Location
* +*/home/$USER/Projects/wsjt-env/wsjtx-$rev_num*+

[[CHKKVASD]]
.Test KVASD

Before you launch _WSJT-X_, ensure _KVASD_ can run.

----------
# CHANGE DIRECTORY and RUN KVASD
cd wsjtx-$rev_num
./kvasd -v

# SUCESSFUL RETURN
KVASD version 1.11

# VIEW COPYRGHT
./kvasd

----------
////